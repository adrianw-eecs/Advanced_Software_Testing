<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:40:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-96/HBASE-96.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-96] regionserver wedged: thread holds lock during blocking read (?)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-96</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Using a patched version of 0.15.0, my regionserver freezes up, saying repeatedly:&lt;/p&gt;

&lt;p&gt;2008-01-22 23:10:12,617 WARN org.apache.hadoop.ipc.Server: IPC Server handler 1 on 60020, call getProtocolVersion(org.&lt;br/&gt;
apache.hadoop.hbase.HRegionInterface, 1) from xxx.xxx.xxx.178:55116: discarded for being too old (46464)&lt;/p&gt;

&lt;p&gt;Then I get:&lt;/p&gt;

&lt;p&gt;2008-01-22 23:11:12,644 WARN org.apache.hadoop.ipc.Server: IPC Server handler 7 on 60020, call openScanner(&lt;del&gt;ROOT&lt;/del&gt;,,0, [Lorg.apache.hadoop.io.Text;@19958bf9, .META., 1201043326058, null) from xxx.xxx.45.192:44993: output error&lt;br/&gt;
java.nio.channels.ClosedChannelException&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(Unknown Source)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.write(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:108)&lt;br/&gt;
        at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:89)&lt;br/&gt;
        at java.io.BufferedOutputStream.flushBuffer(Unknown Source)&lt;br/&gt;
        at java.io.BufferedOutputStream.flush(Unknown Source)&lt;br/&gt;
        at java.io.DataOutputStream.flush(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:615)&lt;br/&gt;
2008-01-22 23:11:12,660 INFO org.apache.hadoop.ipc.Server: Process Thread Dump: Discarding call getProtocolVersion(org.apache.hadoop.hbase.HRegionInterface, 1) from xxx.xxx.45.224:34506&lt;/p&gt;

&lt;p&gt;29 active threads&lt;br/&gt;
Thread 4329 (IPC Client connection to xxx.xxx.44.135:10000):&lt;br/&gt;
  State: WAITING&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 4&lt;br/&gt;
  Waiting on org.apache.hadoop.ipc.Client$Connection@21e1962d&lt;br/&gt;
  Stack:&lt;br/&gt;
    java.lang.Object.wait(Native Method)&lt;br/&gt;
    java.lang.Object.wait(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.Client$Connection.waitForWork(Client.java:216)&lt;br/&gt;
    org.apache.hadoop.ipc.Client$Connection.run(Client.java:255)&lt;br/&gt;
Thread 37 (IPC Server handler 9 on 60020):&lt;br/&gt;
  State: BLOCKED&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 202&lt;br/&gt;
  Blocked on org.apache.hadoop.hbase.HStoreFile@72e8a021&lt;br/&gt;
  Blocked by 29 (IPC Server handler 1 on 60020)&lt;br/&gt;
  Stack:&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore.getScanner(HStore.java:2025)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion$HScanner.&amp;lt;init&amp;gt;(HRegion.java:1699)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion.getScanner(HRegion.java:1271)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegionServer.openScanner(HRegionServer.java:1499)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;br/&gt;
Thread 36 (IPC Server handler 8 on 60020):&lt;br/&gt;
  State: BLOCKED&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 201&lt;br/&gt;
  Blocked on org.apache.hadoop.hbase.HStoreFile@72e8a021&lt;br/&gt;
  Blocked by 29 (IPC Server handler 1 on 60020)&lt;br/&gt;
  Stack:&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore.getScanner(HStore.java:2025)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion$HScanner.&amp;lt;init&amp;gt;(HRegion.java:1699)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion.getScanner(HRegion.java:1271)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegionServer.openScanner(HRegionServer.java:1499)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;br/&gt;
Thread 35 (IPC Server handler 7 on 60020):&lt;br/&gt;
  State: RUNNABLE&lt;br/&gt;
  Blocked count: 4&lt;br/&gt;
  Waited count: 240&lt;br/&gt;
  Stack:&lt;br/&gt;
    sun.management.ThreadImpl.getThreadInfo0(Native Method)&lt;br/&gt;
    sun.management.ThreadImpl.getThreadInfo(Unknown Source)&lt;br/&gt;
    sun.management.ThreadImpl.getThreadInfo(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.util.ReflectionUtils.printThreadInfo(ReflectionUtils.java:114)&lt;br/&gt;
    org.apache.hadoop.util.ReflectionUtils.logThreadInfo(ReflectionUtils.java:162)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:579)&lt;br/&gt;
Thread 34 (IPC Server handler 6 on 60020):&lt;br/&gt;
  State: BLOCKED&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 203&lt;br/&gt;
  Blocked on org.apache.hadoop.hbase.HStoreFile@72e8a021&lt;br/&gt;
  Blocked by 29 (IPC Server handler 1 on 60020)&lt;br/&gt;
  Stack:&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore.getScanner(HStore.java:2025)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion$HScanner.&amp;lt;init&amp;gt;(HRegion.java:1699)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion.getScanner(HRegion.java:1271)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegionServer.openScanner(HRegionServer.java:1499)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;br/&gt;
Thread 33 (IPC Server handler 5 on 60020):&lt;br/&gt;
  State: BLOCKED&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 212&lt;br/&gt;
  Blocked on org.apache.hadoop.hbase.HStoreFile@72e8a021&lt;br/&gt;
  Blocked by 29 (IPC Server handler 1 on 60020)&lt;br/&gt;
  Stack:&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore.getScanner(HStore.java:2025)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion$HScanner.&amp;lt;init&amp;gt;(HRegion.java:1699)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion.getScanner(HRegion.java:1271)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegionServer.openScanner(HRegionServer.java:1499)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;br/&gt;
Thread 32 (IPC Server handler 4 on 60020):&lt;br/&gt;
  State: BLOCKED&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 202&lt;br/&gt;
  Blocked on org.apache.hadoop.hbase.HStoreFile@72e8a021&lt;br/&gt;
  Blocked by 29 (IPC Server handler 1 on 60020)&lt;br/&gt;
  Stack:&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore.getScanner(HStore.java:2025)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion$HScanner.&amp;lt;init&amp;gt;(HRegion.java:1699)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion.getScanner(HRegion.java:1271)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegionServer.openScanner(HRegionServer.java:1499)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;br/&gt;
Thread 31 (IPC Server handler 3 on 60020):&lt;br/&gt;
  State: BLOCKED&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 210&lt;br/&gt;
  Blocked on org.apache.hadoop.hbase.HStoreFile@72e8a021&lt;br/&gt;
  Blocked by 29 (IPC Server handler 1 on 60020)&lt;br/&gt;
  Stack:&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore.getScanner(HStore.java:2025)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion$HScanner.&amp;lt;init&amp;gt;(HRegion.java:1699)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion.getScanner(HRegion.java:1271)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegionServer.openScanner(HRegionServer.java:1499)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;br/&gt;
Thread 30 (IPC Server handler 2 on 60020):&lt;br/&gt;
  State: BLOCKED&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 216&lt;br/&gt;
  Blocked on org.apache.hadoop.hbase.HStoreFile@72e8a021&lt;br/&gt;
  Blocked by 29 (IPC Server handler 1 on 60020)&lt;br/&gt;
  Stack:&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore.getScanner(HStore.java:2025)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion$HScanner.&amp;lt;init&amp;gt;(HRegion.java:1699)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion.getScanner(HRegion.java:1271)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegionServer.openScanner(HRegionServer.java:1499)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;br/&gt;
Thread 29 (IPC Server handler 1 on 60020):&lt;br/&gt;
  State: RUNNABLE&lt;br/&gt;
  Blocked count: 3&lt;br/&gt;
  Waited count: 229&lt;br/&gt;
  Stack:&lt;br/&gt;
    java.net.SocketInputStream.socketRead0(Native Method)&lt;br/&gt;
    java.net.SocketInputStream.read(Unknown Source)&lt;br/&gt;
    java.io.BufferedInputStream.fill(Unknown Source)&lt;br/&gt;
    java.io.BufferedInputStream.read(Unknown Source)&lt;br/&gt;
    java.io.DataInputStream.readShort(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.dfs.DFSClient$BlockReader.newBlockReader(DFSClient.java:773)&lt;br/&gt;
    org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:1000)&lt;br/&gt;
    org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:1096)&lt;br/&gt;
    java.io.DataInputStream.readFully(Unknown Source)&lt;br/&gt;
    java.io.DataInputStream.readFully(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1383)&lt;br/&gt;
    org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1360)&lt;br/&gt;
    org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1349)&lt;br/&gt;
    org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1344)&lt;br/&gt;
    org.apache.hadoop.io.MapFile$Reader.&amp;lt;init&amp;gt;(MapFile.java:263)&lt;br/&gt;
    org.apache.hadoop.io.MapFile$Reader.&amp;lt;init&amp;gt;(MapFile.java:242)&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile$BloomFilterMapFile$Reader.&amp;lt;init&amp;gt;(HStoreFile.java:816)&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
Thread 28 (IPC Server handler 0 on 60020):&lt;br/&gt;
  State: BLOCKED&lt;br/&gt;
  Blocked count: 1&lt;br/&gt;
  Waited count: 200&lt;br/&gt;
  Blocked on org.apache.hadoop.hbase.HStoreFile@72e8a021&lt;br/&gt;
  Blocked by 29 (IPC Server handler 1 on 60020)&lt;br/&gt;
  Stack:&lt;br/&gt;
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)&lt;br/&gt;
    org.apache.hadoop.hbase.HStore.getScanner(HStore.java:2025)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion$HScanner.&amp;lt;init&amp;gt;(HRegion.java:1699)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegion.getScanner(HRegion.java:1271)&lt;br/&gt;
    org.apache.hadoop.hbase.HRegionServer.openScanner(HRegionServer.java:1499)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
    java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;br/&gt;
Thread 14 (IPC Server listener on 60020):&lt;br/&gt;
  State: RUNNABLE&lt;br/&gt;
  Blocked count: 0&lt;br/&gt;
  Waited count: 0&lt;br/&gt;
  Stack:&lt;br/&gt;
    sun.nio.ch.PollArrayWrapper.poll0(Native Method)&lt;br/&gt;
    sun.nio.ch.PollArrayWrapper.poll(Unknown Source)&lt;br/&gt;
    sun.nio.ch.PollSelectorImpl.doSelect(Unknown Source)&lt;br/&gt;
    sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)&lt;br/&gt;
    sun.nio.ch.SelectorImpl.select(Unknown Source)&lt;br/&gt;
    sun.nio.ch.SelectorImpl.select(Unknown Source)&lt;br/&gt;
    org.apache.hadoop.ipc.Server$Listener.run(Server.java:285)&lt;/p&gt;

&lt;p&gt;... etc.&lt;/p&gt;

&lt;p&gt;Note that most of the threads are blocked on thread 29, which is in turn blocked on a socket read.  This node was hosting the ROOT region, so when it got wedged it made hbase unusable (since the master won&apos;t reassign ROOT until the server actually goes down).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12386898">HBASE-96</key>
            <summary>regionserver wedged: thread holds lock during blocking read (?)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bien">Michael Bieniosek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jan 2008 23:33:55 +0000</created>
                <updated>Fri, 22 Aug 2008 21:34:49 +0000</updated>
                            <resolved>Wed, 23 Jan 2008 23:23:07 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12561567" author="stack" created="Wed, 23 Jan 2008 03:05:52 +0000"  >&lt;p&gt;I see a second instance later in the logs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 28 (IPC Server handler 0 on 60020):
  State: RUNNABLE
  Blocked count: 19232
  Waited count: 178149
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(Unknown Source)
    java.io.BufferedInputStream.fill(Unknown Source)
    java.io.BufferedInputStream.read(Unknown Source)
    java.io.DataInputStream.readShort(Unknown Source)
    org.apache.hadoop.dfs.DFSClient$BlockReader.newBlockReader(DFSClient.java:773)
    org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:1000)
    org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:1096)
    java.io.DataInputStream.readFully(Unknown Source)
    java.io.DataInputStream.readFully(Unknown Source)
    org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1383)
    org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1360)
    org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1349)
    org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1344)
    org.apache.hadoop.io.MapFile$Reader.&amp;lt;init&amp;gt;(MapFile.java:254)
    org.apache.hadoop.io.MapFile$Reader.&amp;lt;init&amp;gt;(MapFile.java:242)
    org.apache.hadoop.hbase.HStoreFile$BloomFilterMapFile$Reader.&amp;lt;init&amp;gt;(HStoreFile.java:816)
    org.apache.hadoop.hbase.HStoreFile.getReader(HStoreFile.java:936)
    org.apache.hadoop.hbase.HStore$StoreFileScanner.&amp;lt;init&amp;gt;(HStore.java:2057)
    org.apache.hadoop.hbase.HStore$HStoreScanner.&amp;lt;init&amp;gt;(HStore.java:2203)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;getReader is synchronized.  It looks like the lock could be removed (At least some of the tests done in the method are against finalized data members).  Doesn&apos;t address why we&apos;re hung reading from hdfs.  We&apos;re trying to read the SequenceFile version block, it looks like.  Your dfs.socket.timeout is reasonable?  We set this on the socket as read timeout so you&apos;d think the reads would eventually give up (and then the datanode gets added to list of deadnodes).&lt;/p&gt;</comment>
                            <comment id="12561864" author="stack" created="Wed, 23 Jan 2008 23:23:07 +0000"  >&lt;p&gt;Chatting w/ Michael, turns out a bunch of datanodes were stuck in swap-hell.  Speculation therefore is that the reads were actually doing something, just super slowly.  Meantime threads were blocked because of the synchronized getReader (fix is in patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-17&quot; title=&quot;[hbase] Client exits with IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-17&quot;&gt;&lt;del&gt;HADOOP-2692&lt;/del&gt;&lt;/a&gt;).   We agreed to resolve this issue Invalid.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Jan 2008 03:05:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h49b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97952</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>