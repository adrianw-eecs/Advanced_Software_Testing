<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:40:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-49/HBASE-49.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-49] [hbase] Merge region tool exposed in shell and/or in UI</title>
                <link>https://issues.apache.org/jira/browse/HBASE-49</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;hbase has support for merging regions.  Expose a merge trigger in the shell or in the UI (Can only merge adjacent features so perhaps only makes sense in UI in the regionserver UI).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12384424">HBASE-49</key>
            <summary>[hbase] Merge region tool exposed in shell and/or in UI</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Dec 2007 17:13:29 +0000</created>
                <updated>Fri, 22 Aug 2008 21:34:48 +0000</updated>
                            <resolved>Thu, 15 May 2008 18:13:11 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12556463" author="udanax" created="Mon, 7 Jan 2008 02:41:47 +0000"  >&lt;p&gt;This sounds like a good idea stack. Can you supply examples that would illustrate how you think this should work?&lt;/p&gt;</comment>
                            <comment id="12556464" author="viper799" created="Mon, 7 Jan 2008 03:03:47 +0000"  >&lt;p&gt;I was thanking about this too. Using &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-43&quot; title=&quot;[hbase] Add a read-only attribute to columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-43&quot;&gt;&lt;del&gt;HADOOP-1958&lt;/del&gt;&lt;/a&gt; and let the master handle the mergers. I would thank this would be an easer task once we have &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-43&quot; title=&quot;[hbase] Add a read-only attribute to columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-43&quot;&gt;&lt;del&gt;HADOOP-1958&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-1700&quot; title=&quot;Append to files in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-1700&quot;&gt;&lt;del&gt;HADOOP-1700&lt;/del&gt;&lt;/a&gt; in place.&lt;/p&gt;</comment>
                            <comment id="12556688" author="stack" created="Mon, 7 Jan 2008 20:57:07 +0000"  >&lt;p&gt;Here is an (ugly) suggestion: In the UI where we list regions over on the regionserver, there would be checkbox where regions meet  Clicking on the checkbox and submitting would run the HRegion.merge code.&lt;/p&gt;

&lt;p&gt;In the shell, it&apos;d be some kind of alter table command: alter table x merge regionA regionB&lt;/p&gt;

&lt;p&gt;But currently regions have to be offline for merges to run so this makes things a little awkward.  Shell manages the offlining doing truncate at least. Maybe shell and UI should have means of viewing/dealing with tables that have been offlined?  Or should we change the merge code so it can go against onlined tables?&lt;/p&gt;

&lt;p&gt;Billy: I don&apos;t think &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-1700&quot; title=&quot;Append to files in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-1700&quot;&gt;&lt;del&gt;HADOOP-1700&lt;/del&gt;&lt;/a&gt; a prerequisite adding this feature.  We could do something like we do currently when we split where daughter regions are made with references to the parent: One daughter references the top half of the daughter region and the other, the bottom half.  Eventually the references are let go as compactions start to run in the children.   The new merged region could be made up of mapfiles that reference the two input regions &amp;#8211; a sort of reverse of the split operation.  Doing this, the merges should be as fast as splits and could be done with the table online.&lt;/p&gt;</comment>
                            <comment id="12556694" author="bryanduxbury" created="Mon, 7 Jan 2008 21:08:58 +0000"  >&lt;p&gt;So, you envision the merge operation to not only require manual triggering but to require manual targeting? Shouldn&apos;t the point of merging regions be to maintain the equilibrium of size of regions? Under what circumstances will you have to manually intervene to keep regions appropriately sized?&lt;/p&gt;

&lt;p&gt;It seems like this should really only happen after a substantial number of deletions has occurred, right? That would cause a compacted region to shrink below a healthy size, and if it could be merged with a neighbor, it would be nice. This logic should be built in and automatic, otherwise it would require constant monitoring of region sizes by an administrator. &lt;/p&gt;

&lt;p&gt;Other than this sort of automatic merging, when would you want to manually merge two regions? Doesn&apos;t that expose a somewhat dangerous amount of functionality to the end user?&lt;/p&gt;</comment>
                            <comment id="12556712" author="stack" created="Mon, 7 Jan 2008 21:34:02 +0000"  >&lt;p&gt;Automated balancing of region sizes using merge as well as split would be cool (We only have split working at mo).  We should go there next after we&apos;ve made it so an admin can run merge against an online table.&lt;/p&gt;</comment>
                            <comment id="12556738" author="viper799" created="Mon, 7 Jan 2008 22:13:25 +0000"  >&lt;p&gt;Maybe make a set size in the config make it a % of the max size or something like that and have a command that will run and select all regions that match and merge them in to the smaller of the two regions that are before and after it. It would be nice to have this automated maybe we could tie it in to the split or compaction thread that run on the region servers.&lt;/p&gt;

&lt;p&gt;I like you idea stack if we could do that then the table would not have to be taken offline to merge the regions and all would be cleaned up on the next compaction.&lt;/p&gt;</comment>
                            <comment id="12576048" author="stack" created="Fri, 7 Mar 2008 06:15:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-480&quot; title=&quot;Tool to manually merge two regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-480&quot;&gt;&lt;del&gt;HBASE-480&lt;/del&gt;&lt;/a&gt; adds a merge tool which can be invoked from command-line.&lt;/p&gt;</comment>
                            <comment id="12576050" author="stack" created="Fri, 7 Mar 2008 06:24:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-480&quot; title=&quot;Tool to manually merge two regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-480&quot;&gt;&lt;del&gt;HBASE-480&lt;/del&gt;&lt;/a&gt; adds the shell merge tool.&lt;/p&gt;</comment>
                            <comment id="12597199" author="jdcryans" created="Thu, 15 May 2008 17:12:48 +0000"  >&lt;p&gt;Do we still need this in UI? If not, shouldn&apos;t this be a closed issue?&lt;/p&gt;</comment>
                            <comment id="12597212" author="stack" created="Thu, 15 May 2008 18:13:11 +0000"  >&lt;p&gt;Closing as won&apos;t fix.  There&apos;s a merge tool that can be run from the command line.  Exposing in UI is too awkward given as tables have to offlined first (when offlined, regions don&apos;t show in UI).  Bryan&apos;s remarks that master should automatically run merges of too-small regions as part of a balancing act is a nice idea.  I made a new issue, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-628&quot; title=&quot;automatic merging-up of too small regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-628&quot;&gt;&lt;del&gt;HBASE-628&lt;/del&gt;&lt;/a&gt;, to hold it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Jan 2008 02:41:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31649</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h3tj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>