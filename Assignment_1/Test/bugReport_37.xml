<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:40:24 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-37/HBASE-37.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-37] PHP class for Rest Interface</title>
                <link>https://issues.apache.org/jira/browse/HBASE-37</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is a php class to interact with the rest interface this is my first copy so there could be bugs and changes to come as the rest interface changes. I will make this in to a patch once I am done with it. there is lots of comments in the file and notes on usage but here is some basic stuff to get you started. you are welcome to suggest changes to make it faster or more usable.&lt;/p&gt;

&lt;p&gt;Basic Usage here more details in notes with each function&lt;/p&gt;

&lt;p&gt;	// open a new connection to rest server. Hbase Master default port is 60010&lt;br/&gt;
	$hbase = new hbase_rest($ip, $port);&lt;/p&gt;

&lt;p&gt;	// get list of tables&lt;br/&gt;
	$tables = $hbase-&amp;gt;list_tables();&lt;/p&gt;

&lt;p&gt;	// get table column family names and compression stuff&lt;br/&gt;
	$table_info = $hbase-&amp;gt;table_schema(&quot;search_index&quot;);&lt;/p&gt;

&lt;p&gt;	// get start and end row keys of each region&lt;br/&gt;
	$regions = $hbase-&amp;gt;regions($table);&lt;/p&gt;

&lt;p&gt;	// select data from hbase&lt;br/&gt;
	$results = $hbase-&amp;gt;select($table,$row_key);	&lt;/p&gt;

&lt;p&gt;	// insert data into hbase the $column and $data can be arrays with more then one column inserted in one request&lt;br/&gt;
	$hbase-&amp;gt;insert($table,$row,$column(s),$data(s));&lt;/p&gt;

&lt;p&gt;	// delete a column from a row. Can not use * at this point to remove all I thank there is plans to add this.&lt;br/&gt;
	$hbase-&amp;gt;remove($table,$row,$column);&lt;/p&gt;

&lt;p&gt;	// start a scanner on a set range of table&lt;br/&gt;
	$handle = $hbase-&amp;gt;scanner_start($table,$cols,$start_row,$end_row);&lt;/p&gt;

&lt;p&gt;	// pull the next row of data for a scanner handle&lt;br/&gt;
	$results = $hbase-&amp;gt;scanner_get($handle);&lt;/p&gt;

&lt;p&gt;	// delete a scanner handle&lt;br/&gt;
	$hbase-&amp;gt;scanner_delete($handle);&lt;/p&gt;

&lt;p&gt;	Example of using a scanner this will loop each row until it out of rows.&lt;/p&gt;


&lt;p&gt;	include(hbase_rest.php);&lt;br/&gt;
	$hbase = new hbase_rest($ip, $port);&lt;br/&gt;
	$handle = $hbase-&amp;gt;scanner_start($table,$cols,$start_row,$end_row);&lt;br/&gt;
	$results = true;&lt;br/&gt;
	while ($results){&lt;br/&gt;
		$results = $hbase-&amp;gt;scanner_get($handle);&lt;br/&gt;
		if ($results){&lt;br/&gt;
			foreach($results&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;column&amp;#39;&amp;#93;&lt;/span&gt; as $key =&amp;gt; $value)&lt;/p&gt;
{
				
				....
				code here to work with the $key/column name and the $value of the column
				....
				
			}
&lt;p&gt; // end foreach&lt;br/&gt;
		} // end if&lt;br/&gt;
	}// end while&lt;br/&gt;
	$hbase-&amp;gt;scanner_delete($handle);&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12385748">HBASE-37</key>
            <summary>PHP class for Rest Interface</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="viper799">Billy Pearson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jan 2008 06:14:32 +0000</created>
                <updated>Thu, 2 May 2013 02:29:11 +0000</updated>
                            <resolved>Sat, 22 Aug 2009 19:07:17 +0000</resolved>
                                                                    <component>REST</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12556829" author="viper799" created="Tue, 8 Jan 2008 06:25:32 +0000"  >&lt;p&gt;There is still a problem and I ma not sure if its my code or something with in the rest code but there is a memory usage after using it to insert a few million rows the master or/and the separate rest process (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-278&quot; title=&quot;[hbase] Run REST servlet outside of master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-278&quot;&gt;&lt;del&gt;HADOOP-2316&lt;/del&gt;&lt;/a&gt;) runs out of heap memory there is something using up memory and not releasing it. I have seen it on inserts but have not tested for it much more then that. I run a separate rest process outside of the master so I can kill that with out having to restart the master and the whole cluster.&lt;/p&gt;
</comment>
                            <comment id="12557052" author="bien" created="Tue, 8 Jan 2008 21:57:36 +0000"  >&lt;p&gt;Hi Billy,&lt;/p&gt;

&lt;p&gt;It might be easier for you to use php&apos;s built-in http client, rather than writing the http client yourself.  That way, you won&apos;t have to deal with chunked-encoding, keepalives, etc. (which you ignore, but you might get some performance improvements from them). &lt;/p&gt;

&lt;p&gt;To do the cell fetching, for example, you could just do:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    $xml = simplexml_load_file(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//$host:60050/api/$table/row/$row&quot;&lt;/span&gt;);
&lt;/span&gt;
    $content = array();

    foreach ($xml-&amp;gt;column as $column) {
        $content[base64_decode($column-&amp;gt;name)] = base64_decode($column-&amp;gt;value);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; $content;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12557097" author="viper799" created="Wed, 9 Jan 2008 00:58:53 +0000"  >&lt;p&gt;This would make it easy for reads but for puts I would still have to keep it the same. I forgot about keep-alive been a long time sense I had to use fsockopen Myself but I will work on adding keep-alives into the code to keep the connection open so we do not have to tare down and rebuild the connection per transaction. This will help speed up the code.&lt;/p&gt;</comment>
                            <comment id="12557555" author="viper799" created="Thu, 10 Jan 2008 06:23:55 +0000"  >&lt;p&gt;Bug Fix on insert there was &quot;:&quot; getting added to the end of the data on inserts.&lt;/p&gt;</comment>
                            <comment id="12746354" author="stack" created="Fri, 21 Aug 2009 23:14:41 +0000"  >&lt;p&gt;Can we resolve this issue Billy?  Folks seem to have success going via thrift from PHP.&lt;/p&gt;</comment>
                            <comment id="12746491" author="viper799" created="Sat, 22 Aug 2009 19:07:17 +0000"  >&lt;p&gt;just added to help out others closed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12380573">HBASE-269</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12372688" name="hbase_rest.php" size="17775" author="viper799" created="Tue, 8 Jan 2008 06:15:27 +0000"/>
                            <attachment id="12372876" name="hbase_restv2.php" size="17727" author="viper799" created="Thu, 10 Jan 2008 06:23:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Jan 2008 21:57:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31639</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h3pj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97863</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>