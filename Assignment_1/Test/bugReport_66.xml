<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:40:41 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-66/HBASE-66.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-66] Add support for migrating between hbase versions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-66</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If Hbase is to be used to serve data to live systems we would need a way to upgrade both the underlying hadoop installation and hbase to newer versions with minimal downtime.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12384336">HBASE-66</key>
            <summary>Add support for migrating between hbase versions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Dec 2007 18:44:56 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:05 +0000</updated>
                            <resolved>Tue, 19 Feb 2008 16:09:56 +0000</resolved>
                                                    <fixVersion>0.2.0</fixVersion>
                                    <component>util</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12551198" author="bryanduxbury" created="Thu, 13 Dec 2007 03:11:52 +0000"  >&lt;p&gt;What do we think of creating Rails-esque migration scripts for each version change? Each migration script would have to know how to read the previous version&apos;s data and write the current version. Then we can add a version number to any files we store in HDFS to indicate what version it was created at.&lt;/p&gt;

&lt;p&gt;When you deploy a new version of HBase, you first need to run the migration script. Once the migration is completed successfully, you should be able to start the new version of HBase. Also, the migration script should prefer not overwriting the existing files, instead creating new ones. That way, we&apos;re less likely to make some mistake that causes the old data to get lost while the new data is being re-written.&lt;/p&gt;</comment>
                            <comment id="12551938" author="stack" created="Fri, 14 Dec 2007 20:46:26 +0000"  >&lt;p&gt;I like the rails idea.  Migration should support going in both directions I&apos;d say.&lt;/p&gt;

&lt;p&gt;hbase state is all kept out in the filesystem so hopefully, filesystem machinations should be all thats required making migrations.&lt;/p&gt;

&lt;p&gt;HStoreFiles are MapFiles + an info file stored in a sympathetic directory.  This info file has little in it currently &amp;#8211; just sequence id.  Could also have hbase version.  For log files, perhaps first record is stamp of the hbase version doing the writing.&lt;/p&gt;

&lt;p&gt;It occurred to me that migrations could entail significant rewriting of on-filesystem data.   To distribute the migration, we could we could have the master and regionservers run the migrations.  Each server on startup would look for any migrations to run and just run them if any found.  Nice thing about this is that we&apos;d get the migration job distributed.   But thinking on it, probably better to have the migration done outside of hbase in its own dedicated MR job.  Would be easier tracking failures and running reversals.&lt;/p&gt;</comment>
                            <comment id="12552590" author="bryanduxbury" created="Tue, 18 Dec 2007 00:39:00 +0000"  >&lt;p&gt;I would say -1 on going back in versions of hbase, because a reverse migration doesn&apos;t readily address how to deal with features and settings not available in prior versions. You&apos;d have potential for loss of precision per se in terms of configuration. &lt;/p&gt;

&lt;p&gt;Also,  I&apos;m not sure why you&apos;d ever want to go from a later version to an earlier version, unless you&apos;ve mistakenly upgraded in the first place. I suggest that you take care and back up your old HDFS files before migrating instead.&lt;/p&gt;</comment>
                            <comment id="12552596" author="stack" created="Tue, 18 Dec 2007 01:05:17 +0000"  >&lt;p&gt;I ain&apos;t too invested in our supporting reverse migrations but its worth noting that any migration system worth its salt &amp;#8211; systems I&apos;ve worked on in the past and ruby on rails &amp;#8211;  go both ways if only to facilitate testing of the forward migration (inevitably there&apos;s a bug when you try to migrate real data).&lt;/p&gt;</comment>
                            <comment id="12558037" author="jimk" created="Fri, 11 Jan 2008 17:32:10 +0000"  >&lt;p&gt;stack wrote:&lt;br/&gt;
&amp;gt; I ain&apos;t too invested in our supporting reverse migrations but its worth noting that any migration system worth its salt -&lt;br/&gt;
&amp;gt; systems I&apos;ve worked on in the past and ruby on rails - go both ways if only to facilitate testing of the forward migration&lt;br/&gt;
&amp;gt; (inevitably there&apos;s a bug when you try to migrate real data).&lt;/p&gt;

&lt;p&gt;That&apos;s what backups are for &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;More importantly though, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-339&quot; title=&quot;[hbase] restructure how HBase lays out files in the file system&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-339&quot;&gt;&lt;del&gt;HADOOP-2478&lt;/del&gt;&lt;/a&gt; incorporates a migration tool. The specifics of what the tool does will have to be&lt;br/&gt;
rewritten for each upgrade, but I think the framework is good.&lt;/p&gt;</comment>
                            <comment id="12558038" author="jimk" created="Fri, 11 Jan 2008 17:33:55 +0000"  >&lt;p&gt;Marking this issue as being incorporated by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-339&quot; title=&quot;[hbase] restructure how HBase lays out files in the file system&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-339&quot;&gt;&lt;del&gt;HADOOP-2478&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-339&quot; title=&quot;[hbase] restructure how HBase lays out files in the file system&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-339&quot;&gt;&lt;del&gt;HADOOP-2478&lt;/del&gt;&lt;/a&gt; has a migration too.&lt;/p&gt;</comment>
                            <comment id="12558040" author="stack" created="Fri, 11 Jan 2008 17:39:08 +0000"  >&lt;p&gt;There is no framework that I can see in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-339&quot; title=&quot;[hbase] restructure how HBase lays out files in the file system&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-339&quot;&gt;&lt;del&gt;HADOOP-2478&lt;/del&gt;&lt;/a&gt;.  The is just a single script that addresses a single migration incident.&lt;/p&gt;</comment>
                            <comment id="12560204" author="stack" created="Fri, 18 Jan 2008 02:58:19 +0000"  >&lt;p&gt;Chatting w/ Jim, we need to work out a design for how we see migrations working going forward.  I made a start here &lt;a href=&quot;http://wiki.apache.org/hadoop/Hbase/Migration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hbase/Migration&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12570049" author="bryanduxbury" created="Mon, 18 Feb 2008 23:27:35 +0000"  >&lt;p&gt;The plan on the wiki seems good, and implemented already, at least in part. Should we close this generic migration issue and in the future make new issues for each migration step we add? Right now this issue isn&apos;t really adding very much.&lt;/p&gt;</comment>
                            <comment id="12570287" author="stack" created="Tue, 19 Feb 2008 16:09:56 +0000"  >&lt;p&gt;Agree w/ Bryan comment above.  Resolving.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12386538">HBASE-372</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12385050">HBASE-339</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Dec 2007 03:11:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 44 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h3zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97910</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>