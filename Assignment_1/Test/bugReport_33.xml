<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:40:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-33/HBASE-33.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-33] Add a HTable get/obtainScanner method that retrieves all versions of a particular column and row between two timestamps</title>
                <link>https://issues.apache.org/jira/browse/HBASE-33</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The use case:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;A weblog application for which rows are user ids and posts are stored in a single column, with post date specified by the cell&apos;s timestamp.  The application would then need to be able to display all posts for the last week or month.&lt;/li&gt;
	&lt;li&gt;A feedfetcher for which rows are URLs and feed posts are stored in a single column with the post publish date or fetch time stored in the cell&apos;s timestamp.  The application would then need to be able to display all posts for the last week or month.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Proposed API:&lt;/p&gt;

&lt;p&gt;// Get all versions of the specified row and column whose timestamps are in &lt;span class=&quot;error&quot;&gt;&amp;#91;minTimestamp, maxTimestamp&amp;#93;&lt;/span&gt;&lt;br/&gt;
SortedMap&amp;lt;long, byte[]&amp;gt; getTimestamps(Text row, Text column, long minTimestamp, long maxTimestamp);&lt;/p&gt;

&lt;p&gt;// Get all versions of the specified row and column whose timestamps are &amp;gt;= minTimestamp&lt;br/&gt;
SortedMap&amp;lt;long, byte[]&amp;gt; getTimestamps(Text row, Text column, long minTimestamp);&lt;/p&gt;

&lt;p&gt;I&apos;d be happy to take this on myself, as I need it for the above use cases before migrating my application over to HBase.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12385804">HBASE-33</key>
            <summary>Add a HTable get/obtainScanner method that retrieves all versions of a particular column and row between two timestamps</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12383017">HBASE-52</parent>
                                    <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="pdwryst">Peter Dolan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jan 2008 22:53:25 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:09 +0000</updated>
                            <resolved>Sat, 6 Jun 2009 20:46:18 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12557083" author="stack" created="Tue, 8 Jan 2008 23:57:48 +0000"  >&lt;p&gt;I was going to ask if following works:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][] get(Text row, Text column, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; maxTimestamp, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numVersions)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where numVersions is the number of items to display on a single page + 1 so you know if you should show the &apos;next&apos; page button or not.&lt;/p&gt;

&lt;p&gt;But that you&apos;d have to look at the results, sort and chop the ones not wanted... that seems sufficient reason to add the methods you propose.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;(Note you&apos;ll need to add long type to the HbaseMapWritable)&lt;/p&gt;</comment>
                            <comment id="12559774" author="cardinal41" created="Thu, 17 Jan 2008 01:19:20 +0000"  >&lt;p&gt;Is it possible to have the row and column parameters accept regex as well? For instance, inline with the user scenario above, I need to get all of the feed posts from pages within the domain &quot;org\.apache\..*&quot;.  And I&apos;d also like to request the cells from a column family and not be restricted to a single column.&lt;/p&gt;</comment>
                            <comment id="12561142" author="bryanduxbury" created="Mon, 21 Jan 2008 21:58:11 +0000"  >&lt;p&gt;@John: It sounds like what you want is more like a scanner than what this issue is looking for. You can already do what you&apos;re talking about if you use a scanner.&lt;/p&gt;</comment>
                            <comment id="12561174" author="cardinal41" created="Tue, 22 Jan 2008 00:02:22 +0000"  >&lt;p&gt;@Bryan: that&apos;s what I suspected, however I couldn&apos;t discern how to constrain my rows by those created between min and max timestamp.&lt;/p&gt;</comment>
                            <comment id="12561221" author="stack" created="Tue, 22 Jan 2008 05:07:42 +0000"  >&lt;p&gt;So, sounds like you need to add another method to your wishlist John, an obtainScanner that takes upper and lower bounds on timestamp. Scanners already take filters.  There is an example that takes a regex over rows.  Filters can also work against columns.  But scanners currently only return nearest to supplied timestamp; you need all nearest to a specified starting stamp and N before specified end timestamp.&lt;/p&gt;</comment>
                            <comment id="12594261" author="stack" created="Mon, 5 May 2008 16:25:01 +0000"  >&lt;p&gt;Adding scanner within a timestamp range to the 0.2 list (needed internally).&lt;/p&gt;</comment>
                            <comment id="12600247" author="stack" created="Tue, 27 May 2008 19:11:25 +0000"  >&lt;p&gt;Needed so J-D can finish up the region historian&lt;/p&gt;</comment>
                            <comment id="12602028" author="stack" created="Tue, 3 Jun 2008 19:05:22 +0000"  >&lt;p&gt;Giving it back to Jim now he&apos;s back&lt;/p&gt;</comment>
                            <comment id="12609318" author="jimk" created="Mon, 30 Jun 2008 18:14:11 +0000"  >&lt;p&gt;Implementing a scanner that returns multiple Cells for a single column is going to force an API change. Google&apos;s API for scanners is somewhat different from HBase:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Scanner scanner(T);
ScanStream* stream;
stream = scanner.FetchColumnFamily(&lt;span class=&quot;code-quote&quot;&gt;&quot;anchor&quot;&lt;/span&gt;);
stream-&amp;gt;SetReturnAllVersions();
scanner.Lookup(&lt;span class=&quot;code-quote&quot;&gt;&quot;com.cnn.www&quot;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (; !stream-&amp;gt;Done(); stream-&amp;gt;Next()) {
  printf(&lt;span class=&quot;code-quote&quot;&gt;&quot;%s %s %lld %s\n&quot;&lt;/span&gt;,
    scanner.RowName(),
    stream-&amp;gt;ColumnName(),
    stream-&amp;gt;MicroTimestamp(),
    stream-&amp;gt;Value());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In HBase, we currently cannot retrieve values for multiple timestamps for the same column:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HTable t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTable(conf, &lt;span class=&quot;code-quote&quot;&gt;&quot;tableName&quot;&lt;/span&gt;);
Scanner s = t.getScanner(columns, startRow, timestamp, filter);
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  RowResult r = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((r = s.next()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.print(Bytes.toString(r.getRow));
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], Cell&amp;gt; column: r.entrySet()) {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.print(&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + Bytes.toString(column.getKey()));
      Cell c column.getValue();
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + c.getTimestamp() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + Bytes.toString(c.getValue()));
    }
  }
} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
  s.close();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is, how do we return multiple Cells per column, without seriously breaking the client API? Proposed solution:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;make Cell implement Iterable&lt;/li&gt;
	&lt;li&gt;getValue() returns the &quot;current&quot; value&lt;/li&gt;
	&lt;li&gt;getTimestamp returns the &quot;current&quot; timestamp&lt;/li&gt;
	&lt;li&gt;hasNext() returns true if there are more values&lt;/li&gt;
	&lt;li&gt;next() advances to the &quot;next&quot; value/timestamp&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Initially the &quot;current&quot; value/timestamp point to the first timestamp/value, which preserves the current API.&lt;/p&gt;

&lt;p&gt;Comments?&lt;/p&gt;</comment>
                            <comment id="12609331" author="jimk" created="Mon, 30 Jun 2008 18:53:23 +0000"  >&lt;p&gt;While the proposed solution introduces minimal (and upward compatible) changes to the API, the changes on the server side will be fairly extensive:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;changing the internal scanner API&lt;/li&gt;
	&lt;li&gt;changes to HRegion.HSanner, HStoreScanner, Memcache$MemcacheScanner and StoreFileScanner&lt;/li&gt;
	&lt;li&gt;regression test changes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Given that we are trying to stabilize release 0.2.0 so that we can release it before Hadoop 0.18.0 is available, is this issue critical for HBase 0.2.0 or can it be postponed to HBase 0.3.0?&lt;/p&gt;</comment>
                            <comment id="12609333" author="jdcryans" created="Mon, 30 Jun 2008 18:56:34 +0000"  >&lt;p&gt;Very true Jim. +1&lt;/p&gt;</comment>
                            <comment id="12609372" author="stack" created="Mon, 30 Jun 2008 21:18:54 +0000"  >&lt;p&gt;I chatted with the customer who wanted this issue the most &amp;#8211; powerset pipeline &amp;#8211; and the lads said that they want 0.2 out more than they want this feature and that they can live with this issue being punted to 0.3.&lt;/p&gt;</comment>
                            <comment id="12609422" author="jimk" created="Tue, 1 Jul 2008 01:46:39 +0000"  >&lt;p&gt;Moving to 0.3.0 since it is such a significant server side change.&lt;/p&gt;</comment>
                            <comment id="12710738" author="posix4e" created="Tue, 19 May 2009 14:08:39 +0000"  >&lt;p&gt;Sounds good, I have changed our storage strategy so moving this later is still fine.&lt;/p&gt;</comment>
                            <comment id="12713078" author="stack" created="Tue, 26 May 2009 16:15:27 +0000"  >&lt;p&gt;TODO: Confirm actually solved by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1304&quot; title=&quot;New client server implementation of how gets and puts are handled. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1304&quot;&gt;&lt;del&gt;HBASE-1304&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12716908" author="streamy" created="Sat, 6 Jun 2009 20:46:18 +0000"  >&lt;p&gt;Fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1304&quot; title=&quot;New client server implementation of how gets and puts are handled. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1304&quot;&gt;&lt;del&gt;HBASE-1304&lt;/del&gt;&lt;/a&gt; commit.&lt;/p&gt;

&lt;p&gt;Verified in passing unit test:  org.apache.hadoop.hbase.client.TestClient.testJIRAs.jiraTest33()&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12421797">HBASE-1304</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12399865">HBASE-733</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12383017">HBASE-52</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12404084">HBASE-880</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12384229">HBASE-30</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Jan 2008 23:57:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h3nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97855</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>