<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:40:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-76/HBASE-76.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-76] Purge servers of Text</title>
                <link>https://issues.apache.org/jira/browse/HBASE-76</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Chatting with Jim while looking at profiler outputs, we should make an effort at purging the servers of the Text type so HRegionServer doesn&apos;t ever have to deal in Characters and the concomitant encode/decode to UTF-8.  Toward this end, we&apos;d make changes like moving HStoreKey to have four rather than 3 data members: column family, column family qualifier, row + timestamp done as a basic Writable &amp;#8211; ImmutableBytesWritable? &amp;#8211; and a long rather than a Text column, Text row and a timestamp long.  This would save on our having to do the relatively expensive &apos;find&apos; of the column family separator inside in extractFamily (&amp;gt;10% of CPU scanning).  Chatting about it, we could effect the change without change in the public client API; clients could continue to take Text type for row and column and then client-side, the convertion to HStoreKey could be done before crossing the wire to the server.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12385730">HBASE-76</key>
            <summary>Purge servers of Text</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jan 2008 22:16:02 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:05 +0000</updated>
                            <resolved>Thu, 15 May 2008 22:03:00 +0000</resolved>
                                                    <fixVersion>0.2.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12565934" author="jimk" created="Tue, 5 Feb 2008 22:58:03 +0000"  >&lt;p&gt;If TextSequence obeyed ISA sematics wrt Text, would that solve the problem?&lt;/p&gt;

&lt;p&gt;Or should we move from Text and TextSequence to String?&lt;/p&gt;</comment>
                            <comment id="12565962" author="bryanduxbury" created="Tue, 5 Feb 2008 23:43:11 +0000"  >&lt;p&gt;I think we should split the column into family and qualifier anyway, because it will benefit us when it comes time to switch mapfile implementation. &lt;/p&gt;</comment>
                            <comment id="12565983" author="stack" created="Wed, 6 Feb 2008 01:13:29 +0000"  >&lt;p&gt;TS made a difference profiling saving on Text creations but it can only be used in a few places; its dangerous using it everywhere (the underlying Text can move from under it).  Profiling, an HSK that had family and qualifier members rather just than a column that we then have to split in many places would save us lots of object creations and CPU.&lt;/p&gt;</comment>
                            <comment id="12565995" author="jimk" created="Wed, 6 Feb 2008 02:09:33 +0000"  >&lt;p&gt;If TS really ISA Text, then the Text won&apos;t be able to move out from under it because TS won&apos;t HAVEA Text anymore.&lt;/p&gt;</comment>
                            <comment id="12566003" author="stack" created="Wed, 6 Feb 2008 03:42:02 +0000"  >&lt;p&gt;Then we might as well just make Text instances rather than TS&apos;s (Point of TS was pseudo-substring w/o having to create new instances).&lt;/p&gt;</comment>
                            <comment id="12571832" author="jimk" created="Sun, 24 Feb 2008 02:17:29 +0000"  >&lt;p&gt;Here is a little test program I wrote to test the speed of serialization of Text vs String. While String is a little slower than Text, it isn&apos;t by much. String also has the advantage of being immutable once created. Test results:&lt;/p&gt;

&lt;p&gt;Serialized 1000000 Strings in 547 milliseconds&lt;br/&gt;
Deserialized 1000000 Strings in 860 milliseconds&lt;br/&gt;
Serialized 1000000 Text objects in 531 milliseconds&lt;br/&gt;
Deserialized 1000000 Text objects in 500 milliseconds&lt;/p&gt;</comment>
                            <comment id="12571847" author="bryanduxbury" created="Sun, 24 Feb 2008 03:25:27 +0000"  >&lt;p&gt;I think the important extraction from this issue is that we should split the column name into separate column family and cell qualifier text instances in HStoreKey. Then we&apos;d never have to search the column name for the separator.&lt;/p&gt;</comment>
                            <comment id="12571852" author="jimk" created="Sun, 24 Feb 2008 04:20:38 +0000"  >&lt;p&gt;Agreed on separation.&lt;/p&gt;

&lt;p&gt;The comparison of String and Text was just something I wanted to settle in my mind since I had heard that String was far less efficient than Text. Turns out, not so much.&lt;/p&gt;</comment>
                            <comment id="12571863" author="stack" created="Sun, 24 Feb 2008 05:59:26 +0000"  >&lt;p&gt;Attach the code used doing the test jim. Will help understand the timings.&lt;/p&gt;</comment>
                            <comment id="12571867" author="jimk" created="Sun, 24 Feb 2008 06:09:38 +0000"  >&lt;p&gt;??? its already here.&lt;/p&gt;</comment>
                            <comment id="12571871" author="stack" created="Sun, 24 Feb 2008 06:30:40 +0000"  >&lt;p&gt;Pardon me.  Didn&apos;t look for attachment.&lt;/p&gt;

&lt;p&gt;Test contrasts String&apos;s native UTF-8ing with Text&apos;s and then construction of either from bytes.  Looks like the Text UTF8&apos;ing ain&apos;t that much faster than String&apos;s. The big difference deserializing is kinda odd &amp;#8211; String is doing extra work?&lt;/p&gt;

&lt;p&gt;Text and String though are different animals I suppose; the one is backed by UTF-8 bytes while the other is backed by UTF-16BE.&lt;/p&gt;</comment>
                            <comment id="12571872" author="jimk" created="Sun, 24 Feb 2008 06:35:32 +0000"  >&lt;p&gt;Just thought it was an interesting comparison. It might have different results if I had used real UTF-8 characters instead of just ASCII, don&apos;t know.&lt;/p&gt;</comment>
                            <comment id="12597291" author="stack" created="Thu, 15 May 2008 22:03:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-82&quot; title=&quot;row keys should be array of bytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-82&quot;&gt;&lt;del&gt;HBASE-82&lt;/del&gt;&lt;/a&gt; removed Text from servers.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12383774">HBASE-82</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12376325" name="TextVsString.java" size="4410" author="jimk" created="Sun, 24 Feb 2008 02:17:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Feb 2008 22:58:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h43b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97925</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>