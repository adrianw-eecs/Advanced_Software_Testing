<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:40:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-86/HBASE-86.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-86] [hbase] Inexplicable ArrayIndexOutOfBounds in BloomFilter appending data</title>
                <link>https://issues.apache.org/jira/browse/HBASE-86</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From the list this morning from Josh Wills:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Date: Mon, 22 Oct 2007 12:04:01 -0500
From: &lt;span class=&quot;code-quote&quot;&gt;&quot;Josh Wills&quot;&lt;/span&gt; ....
To: hadoop-user@lucene.apache.org
Subject: Re: A basic question on HBase

...

&amp;gt; &amp;gt;
&amp;gt; &amp;gt; 2)  I was running one of these batch-style uploads last night on an
&amp;gt; &amp;gt; HTable that I configured w/BloomFilters on a couple of my column
&amp;gt; &amp;gt; families.  During one of the compaction operations, I got the
&amp;gt; &amp;gt; following exception--
&amp;gt; &amp;gt;
&amp;gt; &amp;gt; FATAL org.apache.hadoop.hbase.HRegionServer: Set stop flag in
&amp;gt; &amp;gt; regionserver/0:0:0:0:0:0:0:0:60020.splitOrCompactChecker
&amp;gt; &amp;gt; java.lang.ArrayIndexOutOfBoundsException
&amp;gt; &amp;gt;         at java.lang.&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.arraycopy(Native Method)
&amp;gt; &amp;gt;         at sun.security.provider.DigestBase.engineUpdate(DigestBase.jav=
a:102)
&amp;gt; &amp;gt;         at sun.security.provider.SHA.implDigest(SHA.java:94)
&amp;gt; &amp;gt;         at sun.security.provider.DigestBase.engineDigest(DigestBase.jav=
a:161)
&amp;gt; &amp;gt;         at sun.security.provider.DigestBase.engineDigest(DigestBase.jav=
a:140)
&amp;gt; &amp;gt;         at java.security.MessageDigest$Delegate.engineDigest(MessageDig=
est.java:531)
&amp;gt; &amp;gt;         at java.security.MessageDigest.digest(MessageDigest.java:309)
&amp;gt; &amp;gt;         at org.onelab.filter.HashFunction.hash(HashFunction.java:125)
&amp;gt; &amp;gt;         at org.onelab.filter.BloomFilter.add(BloomFilter.java:99)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HStoreFile$BloomFilterMapFile$Writer=
.append(HStoreFile.java:895)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HStore.compact(HStore.java:899)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HStore.compact(HStore.java:728)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HStore.compactHelper(HStore.java:632=
)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HStore.compactHelper(HStore.java:564=
)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HStore.compact(HStore.java:559)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HRegion.compactStores(HRegion.java:7=
17)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HRegionServer$SplitOrCompactChecker.=
checkForSplitsOrCompactions(HRegionServer.java:198)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.HRegionServer$SplitOrCompactChecker.=
chore(HRegionServer.java:188)
&amp;gt; &amp;gt;         at org.apache.hadoop.hbase.Chore.run(Chore.java:58)
&amp;gt; &amp;gt;
&amp;gt; &amp;gt; Note that &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; wasn&apos;t the first compaction that was run (there were
&amp;gt; &amp;gt; others before it that ran successfully) and that the region hadn&apos;t
&amp;gt; &amp;gt; been split at &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; point.  I defined the BloomFilterType.BLOOMFILTER
&amp;gt; &amp;gt; on a couple of the columnfamilies, w/the largest one having ~100000
&amp;gt; &amp;gt; distinct entries.  I don&apos;t know which of these caused the failure, but
&amp;gt; &amp;gt; I noticed that 100000 is quite a bit larger than the # of entries used
&amp;gt; &amp;gt; in the testcases, so I&apos;m wondering &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; that might be the problem.
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Poking around, could be a concurrency issue &amp;#8211; see &lt;a href=&quot;http://forum.java.sun.com/thread.jspa?threadID=700440&amp;amp;messageID=4117706&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.java.sun.com/thread.jspa?threadID=700440&amp;amp;messageID=4117706&lt;/a&gt; &amp;#8211; but Jim and I chatting can&apos;t figure how since there should be one thread only running at compaction time....&lt;/p&gt;

&lt;p&gt;Plan is to try and reproduce on local cluster....&lt;/p&gt;</description>
                <environment></environment>
        <key id="12380948">HBASE-86</key>
            <summary>[hbase] Inexplicable ArrayIndexOutOfBounds in BloomFilter appending data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Oct 2007 21:24:57 +0000</created>
                <updated>Mon, 4 Feb 2008 18:40:36 +0000</updated>
                            <resolved>Thu, 13 Dec 2007 00:03:48 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12536849" author="stack" created="Mon, 22 Oct 2007 22:00:18 +0000"  >&lt;p&gt;More from Josh:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
I was using the BloomFilterDescriptor constructor defined on/around
line 85 (takes a BloomFilterType and an &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numberOfEntries), with
BloomFilterType.BLOOMFILTER and
numberOfEntries = 100000.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12550434" author="udanax" created="Tue, 11 Dec 2007 13:07:29 +0000"  >&lt;p&gt;If you are ok, I&apos;ll do it.&lt;/p&gt;</comment>
                            <comment id="12550641" author="jimk" created="Tue, 11 Dec 2007 17:10:39 +0000"  >&lt;p&gt;Edward,&lt;/p&gt;

&lt;p&gt;If you can figure out why it is happening. Go ahead and fix it.&lt;/p&gt;</comment>
                            <comment id="12551164" author="jimk" created="Thu, 13 Dec 2007 00:03:48 +0000"  >&lt;p&gt;Since we no longer use SHA as the hash function. Closing this issue as won&apos;t fix. However, there is another ArrayIndexOutOfBoundsException being tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-132&quot; title=&quot;[hbase] ArrayIndexOutOfBoundsException in org.onelab.filter.BloomFilter.membershipTest(BloomFilter.java:134)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-132&quot;&gt;&lt;del&gt;HADOOP-2414&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Dec 2007 13:07:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d3tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>