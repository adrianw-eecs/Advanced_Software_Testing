<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:40:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-25/HBASE-25.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-25] [hbase] Stuck regionserver?</title>
                <link>https://issues.apache.org/jira/browse/HBASE-25</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Looking in logs, a regionserver went down because it could not contact the master after 60 seconds.  Watching logging, the HRS is repeatedly checking all 150 loaded regions over and over again w/ a pause of about 5 seconds between runs... then there is a suspicious 60+ second gap with no logging as though the regionserver had hung up on something:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2007-12-03 13:14:54,178 DEBUG hbase.HRegionServer - flushing region postlog,img151/60/plakatlepperduzy1hh7.jpg,1196614355635
2007-12-03 13:14:54,178 DEBUG hbase.HRegion - Not flushing cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region postlog,img151/60/plakatlepperduzy1hh7.jpg,1196614355635: snapshotMemcaches() determined that there was nothing to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
2007-12-03 13:14:54,205 DEBUG hbase.HRegionServer - flushing region postlog,img247/230/seanpaul4li.jpg,1196615889965
2007-12-03 13:14:54,205 DEBUG hbase.HRegion - Not flushing cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region postlog,img247/230/seanpaul4li.jpg,1196615889965: snapshotMemcaches() determined that there was nothing to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
2007-12-03 13:16:04,305 FATAL hbase.HRegionServer - unable to report to master &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 67467 milliseconds - aborting server
2007-12-03 13:16:04,455 INFO  hbase.Leases - regionserver/0:0:0:0:0:0:0:0:60020 closing leases
2007-12-03 13:16:04,455 INFO  hbase.Leases$LeaseMonitor - regionserver/0:0:0:0:0:0:0:0:60020.leaseChecker exiting
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Master seems to be running fine scanning its ~700 regions.  Then you see this in log, before the HRS shuts itself down.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2007-12-03 13:14:31,416 INFO  hbase.Leases - HMaster.leaseChecker lease expired 153260899/1532608992007-12-03 13:14:31,417 INFO  hbase.HMaster - XX.XX.XX.102:60020 lease expired
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... and we go on to process shutdown.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12383847">HBASE-25</key>
            <summary>[hbase] Stuck regionserver?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Dec 2007 03:37:01 +0000</created>
                <updated>Fri, 22 Aug 2008 21:17:40 +0000</updated>
                            <resolved>Fri, 14 Mar 2008 03:44:10 +0000</resolved>
                                                    <fixVersion>0.1.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12548349" author="jimk" created="Tue, 4 Dec 2007 18:51:07 +0000"  >&lt;p&gt;One possibility for this is that the master does not have enough server threads&lt;/p&gt;</comment>
                            <comment id="12548896" author="bryanduxbury" created="Thu, 6 Dec 2007 00:41:28 +0000"  >&lt;p&gt;Affects cluster stability, but cluster recovers on restart, so changing to major.&lt;/p&gt;</comment>
                            <comment id="12549668" author="jimk" created="Sat, 8 Dec 2007 07:50:31 +0000"  >&lt;p&gt;I think this was probably caused by thread starvation in the master or by not having enough server threads allocated in the master.&lt;/p&gt;

&lt;p&gt;The latter is a configuration parameter. If the former, it was probably caused by the bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-246&quot; title=&quot;[hbase] NPE in master server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-246&quot;&gt;&lt;del&gt;HADOOP-2338&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Changing priority to minor.&lt;/p&gt;</comment>
                            <comment id="12550767" author="stack" created="Wed, 12 Dec 2007 00:37:55 +0000"  >&lt;p&gt;Another one of these happened over on pauls&apos; cluster w/ TRUNK from about a day ago.  He has configured to run w/ 40 threads per so I&apos;m guessing its not likely that its lack of allocated threads (could be though):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
2007-12-11 15:39:15,597 DEBUG hbase.HLog - Closing current log writer /hbase/log_XX.XX.XX.16_1197365632138_60020/hlog.dat.2047 to get a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; one
2007-12-11 15:39:15,611 INFO  hbase.HLog - &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; log writer created at /hbase/log_XX.XX.XX.16_1197365632138_60020/hlog.dat.2048
2007-12-11 15:39:15,611 DEBUG hbase.HLog - Found 3 logs to remove using oldest outstanding seqnum of 106741610 from region postlog,img141/6876/angjol7qx.jpg,1197403515753
2007-12-11 15:39:15,612 INFO  hbase.HLog - removing old log file /hbase/log_XX.XX.XX.16_1197365632138_60020/hlog.dat.2044 whose highest sequence/edit id is 106644872
2007-12-11 15:39:15,616 INFO  hbase.HLog - removing old log file /hbase/log_XX.XX.XX.16_1197365632138_60020/hlog.dat.2045 whose highest sequence/edit id is 106674877
2007-12-11 15:39:15,621 INFO  hbase.HLog - removing old log file /hbase/log_XX.XX.XX.16_1197365632138_60020/hlog.dat.2046 whose highest sequence/edit id is 106731580
2007-12-11 15:53:53,090 DEBUG hbase.HRegion - Started memcache flush &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region postlog,img212/6231/yoturco8lb.jpg,1197410959126. Size 96.5k
2007-12-11 15:53:53,407 FATAL hbase.HRegionServer - unable to report to master &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 858080 milliseconds - aborting server
2007-12-11 15:53:53,407 INFO  hbase.Leases - regionserver/0:0:0:0:0:0:0:0:60020 closing leases
2007-12-11 15:53:53,652 WARN  ipc.Server - IPC Server handler 32 on 60020, call batchUpdate(postlog,img211/363/15171222365f2bc22xh.jpg,1197410959123, 1195466232000, org.apache.hadoop.hbase.io.BatchUpdate@7659bf1) from 38.99.77.106:35490: output error
java.nio.channels.ClosedChannelException
    at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:126)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:324)
    at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:108)
    at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:89)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at java.io.DataOutputStream.flush(DataOutputStream.java:106)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:663)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12559204" author="jimk" created="Tue, 15 Jan 2008 19:53:38 +0000"  >&lt;p&gt;I believe this issue was (eventually) addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-246&quot; title=&quot;[hbase] NPE in master server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-246&quot;&gt;&lt;del&gt;HADOOP-2338&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Leaving open in case issue re-occurs. But will downgrade priority.&lt;/p&gt;</comment>
                            <comment id="12578587" author="stack" created="Fri, 14 Mar 2008 03:44:10 +0000"  >&lt;p&gt;On a cluster that was running lots of other heavy-duty processes concurrently, were seeing lots of regionservers going down because could not connect to master within lease interval.  At Jim Firby suggestion, I added logging of how long we were actually sleeping though we&apos;d asked sleep for 3 second only.  Last night during an upload I caught a message that said we&apos;d slept &amp;gt; 30 seconds, longer than default sleep period (See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-501&quot; title=&quot;Empty region server address in info:server entry and a startcode of -1 in .META.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-501&quot;&gt;&lt;del&gt;HBASE-501&lt;/del&gt;&lt;/a&gt;).  I&apos;m guessing this phenomeon of threads oversleeping is what we&apos;ve up to this been calling &apos;hung server&apos;.  Closing as invalid.  Can reopen if the added logging does NOT account for region servers failing to check in with master within lease period.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Dec 2007 18:51:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24863</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h3kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97840</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>